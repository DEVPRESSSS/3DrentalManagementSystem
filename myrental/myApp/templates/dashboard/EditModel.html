{% extends "dashboard/dash_base.html" %}
{% load static %}

{% block content %}
<div class="row">
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_rental_space">Rental Space</label>
            <select class="form-control" id="id_rental_space" name="rental_space">
                {% for space in rental_space %}
                    <option value="{{ space.space_id }}" 
                            {% if space.space_id == form.instance.rental_space_id %}selected{% endif %}>
                        {{ space.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="id_file_path">Upload Image</label>
            <input type="file" class="form-control" id="id_file_path" name="file_path">
            {% if form.instance.file_path %}
                <img src="{{ form.instance.file_path.url }}" style="max-width: 200px; margin-top: 10px;">
            {% else %}
                <p>No file uploaded.</p>
            {% endif %}
        
        
        </div>

        <div class="form-group">
            <label for="id_uploaded_by">Uploaded by</label>
            <select class="form-control" id="id_uploaded_by" name="uploaded_by" required>
                <option value="" disabled>Select a user</option>
                {% for user in users %}
                    <option value="{{ user.user_id }}" 
                            {% if user.user_id == form.instance.uploaded_by_id %}selected{% endif %}>
                        {{ user.username }}
                    </option>
                {% endfor %}
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary text-white">Save</button>
    </form>
</div>
{% endblock %}
